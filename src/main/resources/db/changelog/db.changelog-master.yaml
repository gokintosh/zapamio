databaseChangeLog:
  - changeSet:
      id: 0-uuid-extension
      author: gokul
      changes:
        - sql:
            sql: "CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";"

  - changeSet:
      id: 1-init-deck
      author: gokul
      changes:
        - createTable:
            tableName: decks
            columns:
              - column:
                  name: id
                  type: UUID
                  constraints:
                    primaryKey: true
                  defaultValueComputed: "uuid_generate_v4()"
              - column:
                  name: title
                  type: VARCHAR(255)
              - column:
                  name: description
                  type: VARCHAR(255)
              - column:
                  name: created_at
                  type: TIMESTAMP
              - column:
                  name: updated_at
                  type: TIMESTAMP
  - changeSet:
      id: 2-init-cards
      author: gokul
      changes:
        - createTable:
            tableName: cards
            columns:
              - column:
                  name: id
                  type: UUID
                  constraints:
                    primaryKey: true
                  defaultValueComputed: "uuid_generate_v4()"
              - column:
                  name: deck_id
                  type: UUID
              - column:
                  name: word
                  type: VARCHAR
              - column:
                  name: meaning
                  type: VARCHAR
              - column:
                  name: difficulty_rating
                  type: INT
              - column:
                  name: next_review_date
                  type: TIMESTAMP
              - column:
                  name: created_at
                  type: TIMESTAMP
              - column:
                  name: updated_at
                  type: TIMESTAMP
        - addForeignKeyConstraint:
            baseTableName: cards
            baseColumnNames: deck_id
            referencedTableName: decks
            referencedColumnNames: id
            constraintName: fk_cards_decks_deck_id
  - changeSet:
      id: 3-update-timestamps
      author: gokul
      changes:
        - sql:
            sql: "ALTER TABLE decks ALTER COLUMN created_at TYPE TIMESTAMP WITH TIME ZONE;"
        - sql:
            sql: "ALTER TABLE decks ALTER COLUMN updated_at TYPE TIMESTAMP WITH TIME ZONE;"
        - sql:
            sql: "ALTER TABLE cards ALTER COLUMN next_review_date TYPE TIMESTAMP WITH TIME ZONE;"
        - sql:
            sql: "ALTER TABLE cards ALTER COLUMN created_at TYPE TIMESTAMP WITH TIME ZONE;"
        - sql:
            sql: "ALTER TABLE cards ALTER COLUMN updated_at TYPE TIMESTAMP WITH TIME ZONE;"






